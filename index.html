
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–¢–µ—Å—Ç ‚Äî –ö–∞–∫ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤–∞—à–∞ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Å–µ–π—á–∞—Å?</title>

  <style>
    :root{
      --bg1:#F0B482;   /* –ø–µ—Å–æ—á–Ω—ã–π */
      --bg2:#FDFAF6;   /* —Å–≤–µ—Ç–ª—ã–π */
      --btn:#A57C57;   /* –∫–∞—Ä–∞–º–µ–ª—å–Ω—ã–π */
      --btnHover:#8F694A;

      --text:#1F2328;
      --muted:#5A5F66;

      --card:#FFFFFFCC;
      --line:#00000014;
      --shadow: 0 10px 28px rgba(0,0,0,.12);
      --radius: 18px;

      --pillBg: rgba(165,124,87,.14);
      --pillText: #7F5E43;

      --ctaBg: #F8E7D7;               /* —Å–≤–µ—Ç–ª—ã–π –ø–µ—Å–æ—á–Ω—ã–π –¥–ª—è CTA-–±–ª–æ–∫–∞ */
      --ctaBorder: rgba(165,124,87,.55); /* –∫–∞—Ä–∞–º–µ–ª—å–Ω–∞—è —Ä–∞–º–∫–∞ */
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100vh;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background: linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px 14px;
    }

    .wrap{ width:100%; max-width: 520px; }

    .card{
      background: var(--card);
      backdrop-filter: blur(6px);
      border: 1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px 16px;
    }

    header h1{
      margin: 0 0 10px 0;
      font-size: 22px;
      line-height: 1.2;
      letter-spacing: .2px;
    }

    .intro{
      margin: 0;
      color: var(--muted);
      font-size: 14.5px;
      line-height: 1.55;
    }

    .divider{
      height:1px;
      background: var(--line);
      margin: 14px 0;
    }

    .toprow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin: 10px 0 12px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--pillBg);
      color: var(--pillText);
      font-weight: 700;
      font-size: 13.5px;
      line-height: 1;
      border: 1px solid rgba(165,124,87,.18);
      white-space: nowrap;
    }

    .qmeta{
      display:flex;
      gap:10px;
      align-items:baseline;
      justify-content:space-between;
      margin-bottom: 10px;
    }
    .qnum{
      font-weight: 800;
      font-size: 14px;
      color: var(--btn);
      letter-spacing: .2px;
    }
    .qhint{
      font-size: 12.5px;
      color: var(--muted);
    }

    .question{
      margin: 0 0 10px 0;
      font-size: 16px;
      line-height: 1.35;
      font-weight: 800;
    }

    .hintline{
      margin: 0 0 12px 0;
      color: var(--muted);
      font-size: 13.8px;
      line-height: 1.45;
      display:flex;
      gap: 8px;
      align-items:flex-start;
    }
    .hintline .dot{
      width: 18px;
      height: 18px;
      border-radius: 6px;
      background: rgba(165,124,87,.16);
      border: 1px solid rgba(165,124,87,.18);
      flex: 0 0 18px;
      margin-top: 2px;
    }

    .answers{
      display:flex;
      flex-direction:column;
      gap: 10px;
      margin: 0;
      padding: 0;
      list-style:none;
    }

    .answer-btn{
      width:100%;
      text-align:left;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: #fff;
      padding: 12px 12px;
      font-size: 15px;
      line-height: 1.35;
      cursor:pointer;
      padding-right: 40px;
      position: relative;
      transition: transform .06s ease, border-color .15s ease, box-shadow .15s ease;
      touch-action: manipulation;
    }
    .answer-btn:active{ transform: scale(.99); }
    .answer-btn:hover{ box-shadow: 0 8px 18px rgba(0,0,0,.08); }
    .answer-btn[aria-pressed="true"]{
      border-color: rgba(165,124,87,.55);
      box-shadow: 0 10px 22px rgba(165,124,87,.18);
      outline: none;
    }
    .answer-btn[aria-pressed="true"]::after{
      content:"‚úì";
      position:absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 26px;
      height: 26px;
      border-radius: 999px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: rgba(165,124,87,.12);
      color: var(--btn);
      font-weight: 900;
    }

    .nav{
      margin-top: 14px;
      display:flex;
      gap: 10px;
      justify-content: space-between;
    }

    .btn{
      border:0;
      border-radius: 14px;
      background: var(--btn);
      color: #fff;
      padding: 11px 14px;
      font-size: 14.5px;
      font-weight: 800;
      cursor:pointer;
      touch-action: manipulation;
      transition: background .15s ease, transform .06s ease;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      min-height: 44px;
    }
    .btn:hover{ background: var(--btnHover); }
    .btn:active{ transform: scale(.99); }

    .btn.secondary{
      background: transparent;
      color: var(--btn);
      border: 1px solid rgba(165,124,87,.45);
    }
    .btn.secondary:hover{ background: rgba(165,124,87,.08); }

    .fade{ animation: fade .18s ease both; }
    @keyframes fade{
      from { opacity: 0; transform: translateY(6px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .result-title{
      margin: 0 0 10px 0;
      font-size: 18px;
      font-weight: 900;
      line-height: 1.25;
    }
    .result-text{
      margin: 0 0 10px 0;
      font-size: 14.8px;
      line-height: 1.55;
      color: var(--text);
    }

    /* CTA –±–ª–æ–∫ ‚Äî –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π */
    .cta{
      margin-top: 12px;
      padding: 14px;
      border-radius: 16px;
      background: var(--ctaBg);
      border: 1px solid var(--ctaBorder);
    }
    .cta p{
      margin:0 0 10px 0;
      font-size: 14.6px;
      line-height: 1.55;
      color: var(--text);
    }
    .cta p:last-child{ margin-bottom: 0; }

    .footer-actions{
      margin-top: 12px;
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .sr-only{
      position:absolute;
      width:1px;height:1px;
      padding:0;margin:-1px;
      overflow:hidden;clip:rect(0,0,0,0);
      white-space:nowrap;border:0;
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="card fade" id="app" aria-live="polite"></section>
  </main>

  <script>
    const TG_DM_URL = "https://t.me/Yuliya_Pechenenko_1987";

    const testTitle = "–¢–µ—Å—Ç: ¬´–ö–∞–∫ –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤–∞—à–∞ –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Å–µ–π—á–∞—Å?¬ª";
    const introLines = [
      "–≠—Ç–æ—Ç —Ç–µ—Å—Ç ‚Äî –Ω–µ –ø—Ä–æ ‚Äú–ø—Ä–∞–≤–∏–ª—å–Ω–æ / –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ‚Äù.",
      "–û–Ω –ø—Ä–æ —Ç–æ, –∫–∞–∫ –≤—ã —Å–µ–π—á–∞—Å —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è –≤ —Å–≤–æ–µ–π –∂–µ–Ω—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏, –º—è–≥–∫–æ—Å—Ç–∏ –∏ –æ–ø–æ—Ä–µ –Ω–∞ —Å–µ–±—è.",
      "–û—Ç–≤–µ—Ç—å—Ç–µ —á–µ—Å—Ç–Ω–æ ‚Äî –∑–¥–µ—Å—å –Ω–µ—Ç ¬´–ª—É—á—à–∏—Ö¬ª –æ—Ç–≤–µ—Ç–æ–≤."
    ];

    const questionHints = [
      "–ù–µ–±–æ–ª—å—à–∞—è –ø–æ–¥—Å–∫–∞–∑–∫–∞: –≤—Å–ø–æ–º–Ω–∏—Ç–µ, –∫–∞–∫ —á–∞—â–µ –±—ã–≤–∞–µ—Ç –≤ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3‚Äì5 –¥–Ω–µ–π, –∞ –Ω–µ –≤ ¬´–∏–¥–µ–∞–ª—å–Ω—ã–π¬ª –¥–µ–Ω—å.",
      "–ü–æ–¥—Å–∫–∞–∑–∫–∞: –æ—Ç–º–µ—Ç—å—Ç–µ –≤–∞—à —Å–∞–º—ã–π —á–∞—Å—Ç—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π, –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω –≤–∞–º –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è ‚Äî —ç—Ç–æ —É–∂–µ —á–µ—Å—Ç–Ω—ã–π —à–∞–≥ –∫ —Å–µ–±–µ.",
      "–ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤—ã–±–µ—Ä–∏—Ç–µ —Ç–æ, —á—Ç–æ –æ—â—É—â–∞–µ—Ç—Å—è –±–ª–∏–∂–µ —Å–µ–π—á–∞—Å ‚Äî –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏ –æ–ø—Ä–∞–≤–¥–∞–Ω–∏–π.",
      "–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, –∫–∞–∫ –≤—ã —Ä–∞–∑–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç–µ —Å —Å–æ–±–æ–π –≤ —Ç—Ä—É–¥–Ω—ã–π –º–æ–º–µ–Ω—Ç ‚Äî –∫–∞–∫–∏–µ —Å–ª–æ–≤–∞ –∑–≤—É—á–∞—Ç –ø–µ—Ä–≤—ã–º–∏?",
      "–ü–æ–¥—Å–∫–∞–∑–∫–∞: –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –æ—â—É—â–µ–Ω–∏–µ ‚Äî —á—Ç–æ –¥–ª—è –≤–∞—Å –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∏–º–µ–Ω–Ω–æ –≤ —ç—Ç–æ–º –ø–µ—Ä–∏–æ–¥–µ –∂–∏–∑–Ω–∏.",
      "–ü–æ–¥—Å–∫–∞–∑–∫–∞: –ø–æ–¥—É–º–∞–π—Ç–µ, –∫–∞–∫ –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ —Ç–µ–ª–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è ‚Äî —Å–∫–æ—Ä–µ–µ ¬´–≤—Å–ø–æ–º–∏–Ω–∞–µ—Ç–µ¬ª –æ –Ω—ë–º –∏–ª–∏ ¬´–∂–∏–≤—ë—Ç–µ¬ª –≤ –∫–æ–Ω—Ç–∞–∫—Ç–µ?",
      "–ü–æ–¥—Å–∫–∞–∑–∫–∞: –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ—Ä–∞–∑—É, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –¥–∞–∂–µ –µ—Å–ª–∏ —Ä–∞–∑—É–º —Å–ø–æ—Ä–∏—Ç."
    ];

    const questions = [
      {
        q: "–ö–∞–∫ –≤—ã —á–∞—â–µ –≤—Å–µ–≥–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ —Å–≤–æ–∏–º —á—É–≤—Å—Ç–≤–∞–º?",
        a: [
          { key: "A", text: "–Ø —Å—Ç–∞—Ä–∞—é—Å—å –∏—Ö –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏ –¥–µ—Ä–∂–∞—Ç—å –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º" },
          { key: "B", text: "–Ø –∑–∞–º–µ—á–∞—é —Å–≤–æ–∏ —á—É–≤—Å—Ç–≤–∞, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ —Å –Ω–∏–º–∏ –¥–µ–ª–∞—Ç—å" },
          { key: "C", text: "–Ø –ø—Ä–∏—Å–ª—É—à–∏–≤–∞—é—Å—å –∫ —Å–µ–±–µ –∏ —Å—Ç–∞—Ä–∞—é—Å—å –±–µ—Ä–µ–∂–Ω–æ –ø—Ä–æ–∂–∏–≤–∞—Ç—å —ç–º–æ—Ü–∏–∏" }
        ]
      },
      {
        q: "–ö–æ–≥–¥–∞ –≤—ã —É—Å—Ç–∞–µ—Ç–µ, –≤—ã —á–∞—â–µ –≤—Å–µ–≥–æ‚Ä¶",
        a: [
          { key: "A", text: "–ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç–µ –¥–µ–ª–∞—Ç—å ¬´–Ω–∞–¥–æ¬ª, –¥–∞–∂–µ —á–µ—Ä–µ–∑ —Å–∏–ª—É" },
          { key: "B", text: "–ò–Ω–æ–≥–¥–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç–µ —Å–µ–±–µ –ø–∞—É–∑—É, –Ω–æ —Å —á—É–≤—Å—Ç–≤–æ–º –≤–∏–Ω—ã" },
          { key: "C", text: "–°—Ç–∞—Ä–∞–µ—Ç–µ—Å—å –≤–æ–≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è" }
        ]
      },
      {
        q: "–ö–∞–∫ –≤—ã –æ—Ç–Ω–æ—Å–∏—Ç–µ—Å—å –∫ –ø–æ–º–æ—â–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö?",
        a: [
          { key: "A", text: "–ú–Ω–µ —Å–ª–æ–∂–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–º–æ—â—å, –ø—Ä–æ—â–µ –≤—Å—ë —Å–∞–º–æ–π" },
          { key: "B", text: "–Ø –ø—Ä–∏–Ω–∏–º–∞—é –ø–æ–º–æ—â—å, –µ—Å–ª–∏ –æ—á–µ–Ω—å –Ω—É–∂–Ω–æ" },
          { key: "C", text: "–Ø —Å–ø–æ–∫–æ–π–Ω–æ –ø–æ–∑–≤–æ–ª—è—é —Å–µ–±–µ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö" }
        ]
      },
      {
        q: "–í–∞—à–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ —Å–µ–±–µ –≤ —Å–ª–æ–∂–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã ‚Äî –∫–∞–∫–æ–µ –æ–Ω–æ?",
        a: [
          { key: "A", text: "–Ø —Å–∫–æ—Ä–µ–µ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–∞ –∏ –∫—Ä–∏—Ç–∏–∫—É—é —Å–µ–±—è" },
          { key: "B", text: "–ò–Ω–æ–≥–¥–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é —Å–µ–±—è, –∏–Ω–æ–≥–¥–∞ ‚Äî –Ω–µ—Ç" },
          { key: "C", text: "–Ø —Å—Ç–∞—Ä–∞—é—Å—å –±—ã—Ç—å –∫ —Å–µ–±–µ –º—è–≥–∫–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–µ–π" }
        ]
      },
      {
        q: "–ß—Ç–æ –¥–ª—è –≤–∞—Å —Å–µ–π—á–∞—Å –∂–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å?",
        a: [
          { key: "A", text: "–ß—Ç–æ-—Ç–æ –¥–∞–ª—ë–∫–æ–µ, –Ω–∞ —á—Ç–æ –ø–æ–∫–∞ –Ω–µ—Ç —Ä–µ—Å—É—Ä—Å–∞" },
          { key: "B", text: "–°–æ—Å—Ç–æ—è–Ω–∏–µ, –∫ –∫–æ—Ç–æ—Ä–æ–º—É —è —Ç–æ–ª—å–∫–æ –ø—Ä–∏–±–ª–∏–∂–∞—é—Å—å" },
          { key: "C", text: "–ú–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ä–µ—Å—É—Ä—Å –∏ —Å–ø–æ—Å–æ–± –±—ã—Ç—å —Å–æ–±–æ–π" }
        ]
      },
      {
        q: "–ö–∞–∫ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–≤–æ—ë —Ç–µ–ª–æ?",
        a: [
          { key: "A", text: "–°–∫–æ—Ä–µ–µ –∫–∞–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å" },
          { key: "B", text: "–ò–Ω–æ–≥–¥–∞ –∑–∞–º–µ—á–∞—é —Å–∏–≥–Ω–∞–ª—ã —Ç–µ–ª–∞" },
          { key: "C", text: "–Ø —Å—Ç–∞—Ä–∞—é—Å—å —Å–ª—ã—à–∞—Ç—å —Ç–µ–ª–æ –∏ –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ –Ω—ë–º" }
        ]
      },
      {
        q: "–ö–æ–≥–¥–∞ –≤—ã –¥—É–º–∞–µ—Ç–µ –æ —Å–µ–±–µ, —á—Ç–æ –æ—Ç–∫–ª–∏–∫–∞–µ—Ç—Å—è –±–æ–ª—å—à–µ?",
        a: [
          { key: "A", text: "¬´–Ø –¥–µ—Ä–∂—É—Å—å¬ª" },
          { key: "B", text: "¬´–Ø —É—á—É—Å—å –±—ã—Ç—å –º—è–≥—á–µ –∫ —Å–µ–±–µ¬ª" },
          { key: "C", text: "¬´–ú–Ω–µ –º–æ–∂–Ω–æ –±—ã—Ç—å —Ä–∞–∑–Ω–æ–π ‚Äî –∏ —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ¬ª" }
        ]
      }
    ];

    const results = {
      A: {
        title: "üå± –†–µ–∑—É–ª—å—Ç–∞—Ç 1. –ñ–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å —Å–µ–π—á–∞—Å –ø—Ä–∏–≥–ª—É—à–µ–Ω–∞",
        text: [
          "–≠—Ç–æ –Ω–µ –º–∏–Ω—É—Å –∏ –Ω–µ –æ—à–∏–±–∫–∞.",
          "–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –≤—ã –¥–æ–ª–≥–æ –æ–ø–∏—Ä–∞–ª–∏—Å—å –Ω–∞ —Å–∏–ª—É, –∫–æ–Ω—Ç—Ä–æ–ª—å –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.",
          "–ñ–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–µ –∏—Å—á–µ–∑–∞–µ—Ç ‚Äî –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –∂–¥—ë—Ç, –∫–æ–≥–¥–∞ –µ–π —Å—Ç–∞–Ω–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è.",
          "üí¨ –°–µ–π—á–∞—Å –¥–ª—è –≤–∞—Å –æ—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω—ã –±–µ—Ä–µ–∂–Ω–æ—Å—Ç—å –∫ —Å–µ–±–µ, –æ—Ç–¥—ã—Ö –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–µ –±—ã—Ç—å —Å–∏–ª—å–Ω–æ–π –≤—Å–µ–≥–¥–∞."
        ]
      },
      B: {
        title: "üåø –†–µ–∑—É–ª—å—Ç–∞—Ç 2. –ñ–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞—Å–∫—Ä—ã—Ç–∏—è",
        text: [
          "–í—ã —É–∂–µ —Å–ª—ã—à–∏—Ç–µ —Å–µ–±—è, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Å–æ–º–Ω–µ–≤–∞–µ—Ç–µ—Å—å, –º–æ–∂–Ω–æ –ª–∏ –±—ã—Ç—å –º—è–≥—á–µ –∏ —Å–ø–æ–∫–æ–π–Ω–µ–µ.",
          "–í–Ω—É—Ç—Ä–∏ –µ—Å—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É ¬´–Ω–∞–¥–æ¬ª –∏ ¬´—Ö–æ—á—É¬ª.",
          "üí¨ –í—ã –Ω–∞ –≤–∞–∂–Ω–æ–º —ç—Ç–∞–ø–µ ‚Äî –∫–æ–≥–¥–∞ –∑–∞–±–æ—Ç–∞ –æ —Å–µ–±–µ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ —Å–ª–∞–±–æ—Å—Ç—å—é, –∞ –æ–ø–æ—Ä–æ–π."
        ]
      },
      C: {
        title: "üå∏ –†–µ–∑—É–ª—å—Ç–∞—Ç 3. –ñ–µ–Ω—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∫–∞–∫ —Ä–µ—Å—É—Ä—Å",
        text: [
          "–í—ã —Ö–æ—Ä–æ—à–æ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ —Å–µ–±—è, —Å–≤–æ–∏ –≥—Ä–∞–Ω–∏—Ü—ã –∏ –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç–∏.",
          "–í –≤–∞—à–µ–π –º—è–≥–∫–æ—Å—Ç–∏ –µ—Å—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–∏–ª–∞, –∞ –≤ –∑–∞–±–æ—Ç–µ –æ —Å–µ–±–µ ‚Äî –∑—Ä–µ–ª–æ—Å—Ç—å.",
          "üí¨ –≠—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –ø—Ä–æ –∏–¥–µ–∞–ª, –∞ –ø—Ä–æ —á–µ—Å—Ç–Ω–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç–∞–∫—Ç —Å —Å–æ–±–æ–π."
        ]
      }
    };

    // —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    let step = 0; // —Å—Ä–∞–∑—É –ø–µ—Ä–≤—ã–π –≤–æ–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const answers = Array(questions.length).fill(null); // 'A' | 'B' | 'C'
    const app = document.getElementById("app");

    function renderQuestion(){
      const i = step;
      const q = questions[i];
      const chosen = answers[i];

      app.classList.remove("fade"); void app.offsetWidth; app.classList.add("fade");

      const answerButtons = q.a.map((opt, idx) => {
        const pressed = chosen === opt.key ? "true" : "false";
        const label = ["A", "B", "C"][idx];
        return `
          <li>
            <button
              class="answer-btn"
              type="button"
              data-key="${opt.key}"
              aria-pressed="${pressed}"
            >
              <span class="sr-only">–í–∞—Ä–∏–∞–Ω—Ç ${label}: </span>${escapeHtml(opt.text)}
            </button>
          </li>
        `;
      }).join("");

      const introBlock = (i === 0)
        ? `<p class="intro">${escapeHtml(introLines[0])}<br>${escapeHtml(introLines[1])}<br>${escapeHtml(introLines[2])}</p>
           <div class="divider"></div>`
        : `<div class="divider"></div>`;

      app.innerHTML = `
        <header>
          <h1>${escapeHtml(testTitle)}</h1>
          ${introBlock}
        </header>

        <div class="toprow">
          <div class="pill">7 –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Ä¢ ${i + 1}/${questions.length}</div>
          <div class="qhint">–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç</div>
        </div>

        <div class="qmeta">
          <div class="qnum">–í–æ–ø—Ä–æ—Å ${i + 1} –∏–∑ ${questions.length}</div>
          <div class="qhint"></div>
        </div>

        <p class="question">${escapeHtml(q.q)}</p>

        <p class="hintline">
          <span class="dot" aria-hidden="true"></span>
          <span>${escapeHtml(questionHints[i])}</span>
        </p>

        <ul class="answers">
          ${answerButtons}
        </ul>

        <div class="nav">
          ${i === 0
            ? `<span></span>`
            : `<button class="btn secondary" id="backBtn" type="button">–ù–∞–∑–∞–¥</button>`
          }
          <span></span>
        </div>
      `;

      // –≤—ã–±–æ—Ä –æ—Ç–≤–µ—Ç–∞ -> —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å -> –∞–≤—Ç–æ –ø–µ—Ä–µ—Ö–æ–¥
      app.querySelectorAll(".answer-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          const key = btn.getAttribute("data-key");
          answers[i] = key;

          if (i === questions.length - 1) {
            renderResult();
          } else {
            step += 1;
            renderQuestion();
          }
        });
      });

      const backBtn = document.getElementById("backBtn");
      if (backBtn){
        backBtn.addEventListener("click", () => {
          step -= 1;
          renderQuestion();
        });
      }
    }

    function computeResultKey(){
      if (answers.some(v => v === null)) return null;

      const counts = {A:0, B:0, C:0};
      answers.forEach(k => counts[k]++);

      const max = Math.max(counts.A, counts.B, counts.C);
      const winners = Object.keys(counts).filter(k => counts[k] === max);

      // –µ—Å–ª–∏ –ª–∏–¥–µ—Ä –æ–¥–∏–Ω ‚Äî –æ–Ω –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
      // –µ—Å–ª–∏ –ª–∏–¥–µ—Ä–æ–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ ‚Äî –ø–æ –ø—Ä–∞–≤–∏–ª—É –ø–æ–∫–∞–∑—ã–≤–∞–µ–º B (—Å—Ä–µ–¥–Ω–∏–π)
      if (winners.length === 1) return winners[0];
      return "B";
    }

    function renderResult(){
      const key = computeResultKey();
      if (!key){
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç.");
        step = answers.findIndex(v => v === null);
        if (step < 0) step = 0;
        renderQuestion();
        return;
      }

      const r = results[key];

      app.classList.remove("fade"); void app.offsetWidth; app.classList.add("fade");

      const paragraphs = r.text.map(t => `<p class="result-text">${escapeHtml(t)}</p>`).join("");

      app.innerHTML = `
        <header>
          <h1>${escapeHtml(testTitle)}</h1>
        </header>

        <div class="divider"></div>

        <h2 class="result-title">${escapeHtml(r.title)}</h2>
        ${paragraphs}

        <div class="cta">
          <p>
            –ï—Å–ª–∏ –≤–∞–º –±—ã–ª–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ —ç—Ç–æ –Ω–µ–±–æ–ª—å—à–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ,<br>
            –≤ –∑–∞–∫—Ä—ã—Ç–æ–º –∫–ª—É–±–µ ¬´–î–∞—Ä-–ø—Ç–∏—Ü–∞¬ª —è –¥–µ–ª—é—Å—å –º—ã—Å–ª—è–º–∏ –∏ –ø—Ä–∞–∫—Ç–∏–∫–∞–º–∏<br>
            –æ –±–µ—Ä–µ–∂–Ω–æ–º –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫ —Å–µ–±–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –æ–ø–æ—Ä–µ.
          </p>
          <p>
            –¢–∞–º ‚Äî –±–æ–ª—å—à–µ –º—è–≥–∫–∏—Ö —Ä–∞–∑–º—ã—à–ª–µ–Ω–∏–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–ª—è –∂–µ–Ω—â–∏–Ω.
          </p>
          <p>
            –ë—É–¥—É —Ä–∞–¥–∞ –≤–∏–¥–µ—Ç—å –≤–∞—Å –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∫–ª—É–±–∞.
          </p>

          <div class="footer-actions">
            <a class="btn" href="${TG_DM_URL}" target="_blank" rel="noopener noreferrer">–ù–∞–ø–∏—Å–∞—Ç—å –≤ –ª/—Å</a>
            <button class="btn secondary" id="restartBtn" type="button">–ü—Ä–æ–π—Ç–∏ –µ—â—ë —Ä–∞–∑</button>
          </div>
        </div>
      `;

      document.getElementById("restartBtn").addEventListener("click", () => {
        for (let i = 0; i < answers.length; i++) answers[i] = null;
        step = 0;
        renderQuestion();
      });
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // —Å—Ç–∞—Ä—Ç ‚Äî —Å—Ä–∞–∑—É 1-–π –≤–æ–ø—Ä–æ—Å –Ω–∞ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    renderQuestion();
  </script>
</body>
</html>
